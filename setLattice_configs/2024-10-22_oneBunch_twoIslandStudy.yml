include: 
- "setLattice_configs/defaults.yml"
- "setLattice_configs/bounds.yml"

#Two island study: https://docs.google.com/presentation/d/1FfaVf_9RHbaN0NZ-oewsK7TWsEsQt-l1gWrt-4Edlfc/edit#slide=id.g34042655758_0_0


####################
########################################
############################################################
################################################################################
####################################################################################################
########################################################################################################################

#2024-10-22: New IMPACT one-bunch

########################################################################################################################
####################################################################################################
################################################################################
############################################################
########################################
####################

#2024-10-22-15-20-50 2024-10-22_oneBunch optimization on PR10571.
    # twissCalculationFraction : 0.7
    # PSystem_emitSI_x : 2.7609e-6
    # PSystem_emitSI_y : 2.1442e-6
    # PSystem_norm_emit_x : 1.2512e-6
    # PSystem_norm_emit_y : 1.0193e-6
    # PSystem_BMAG_x : 1.0001451679
    # PSystem_BMAG_y : 1.0001521435
    # PSystem_BMAG_emit_x : 1.2514e-6
    # PSystem_BMAG_emit_y : 1.0195e-6
    # PSystem_BMAG_emitSI_x : 2.7613e-6
    # PSystem_BMAG_emitSI_y : 2.1446e-6
inputBeamFilePathSuffix : '/beams/2024-10-22_Impact_OneBunch/2024-10-22_oneBunch.h5'
bunchCount : 1
QA10361kG : -3.1976079537
QA10371kG : 3.1129092742
QE10425kG : -6.8469996218
QE10441kG : 1.5057761462
QE10511kG : 7.0138622173
QE10525kG : -5.3942250594
L0BPhaseSet : -15.0
L0BEnergyOffset : -2759313 #2024-10-22_oneBunch comes out of L0A just at a tiny bit higher energy. Compensate in L0B to get to the design 125 MeV




# 2025-04-06-07-59-09 One bunch, CSR OFF! <5 um length constraint. Otherwise optimize spot
# Starting from 2025-04-04-17-12-55
# Limited optimization 
# centerBC14 : True
# centerBC20 : True
# centerMFFF : True
# assertBC14Energy : True
# assertBC20Energy : True
# symmetricSextupoleStrengths : True
# L1PhaseSet : -29.8968907035
# L2PhaseSet : -41.7271714644
# S1ELkG : 137.7504509524
# S2ELkG : -921.6058349037
# S3ELkG : -642.5602190847
# S1EL_xOffset : 0.0036362126
# S1EL_yOffset : -0.0006244894
# S2EL_xOffset : 0.0016381707
# S2EL_yOffset : 0.0000385292
# S2ER_xOffset : 0.0011570029
# S2ER_yOffset : -3.797e-7
# S1ER_xOffset : 0.0028245459
# S1ER_yOffset : 0.0002465706
#PENT: 11 x 7.0 x 4.1 um



centerBC14 : True
centerBC20 : True
centerMFFF : True
assertBC14Energy : True
assertBC20Energy : True
symmetricSextupoleStrengths : True



# 2025-04-09-13-21-55 Top island CSR OFF, -30.5/-43.0
# L1PhaseSet : -30.5
# L2PhaseSet : -43.0
# S1ELkG : 2266.2269181157
# S2ELkG : -40.3178254004
# S3ELkG : -1653.3961944189
# S1EL_xOffset : -0.0012240149
# S1EL_yOffset : 0.0000126816
# S2EL_xOffset : 0.0034458145
# S2EL_yOffset : -0.0010911758
# S2ER_xOffset : -0.0025926641
# S2ER_yOffset : 0.0012230202
# S1ER_xOffset : -0.0020950523
# S1ER_yOffset : 0.0000358856


# 2025-04-09-13-51-14 Top island CSR OFF, -29.5/-41.0
# L1PhaseSet : -29.5
# L2PhaseSet : -41.0
# S1ELkG : 16.0941171098
# S2ELkG : -411.1550517668
# S3ELkG : -65.1084248617
# S1EL_xOffset : -0.0013772824
# S1EL_yOffset : -0.0006069614
# S2EL_xOffset : 0.0038883137
# S2EL_yOffset : -0.00029307
# S2ER_xOffset : 0.0022264328
# S2ER_yOffset : 0.0002651148
# S1ER_xOffset : -0.0035359009
# S1ER_yOffset : -0.0000774269

# 2025-04-09-15-22-44 Top island CSR OFF, -28.5/-39.5
# L1PhaseSet : -28.5
# L2PhaseSet : -39.5
# S1ELkG : 86.5542237458
# S2ELkG : -67.0109956596
# S3ELkG : -1755.6680366273
# S1EL_xOffset : 0.0010533402
# S1EL_yOffset : 0.0000386193
# S2EL_xOffset : -0.0015125292
# S2EL_yOffset : 0.0029799028
# S2ER_xOffset : 0.0009555631
# S2ER_yOffset : 0.0001076247
# S1ER_xOffset : 0.0021632342
# S1ER_yOffset : -0.0001363339


# 2025-04-09-16-19-41 Bottom island CSR OFF, -29/-45.5
# L1PhaseSet : -29
# L2PhaseSet : -45.5
# S1ELkG : 180.9749224707
# S2ELkG : -2276.8078604356
# S3ELkG : -182.8682192552
# S1EL_xOffset : 0.001376673
# S1EL_yOffset : 0.0033964823
# S2EL_xOffset : 0.0003655481
# S2EL_yOffset : 0.0006806503
# S2ER_xOffset : 0.000429936
# S2ER_yOffset : -0.0000789636
# S1ER_xOffset : -0.0004218529
# S1ER_yOffset : -0.0008897201

# 2025-04-09-18-04-59 Bottom island CSR OFF, -28/-43.5
# L1PhaseSet : -28
# L2PhaseSet : -43.5
# S1ELkG : 36.8377830773
# S2ELkG : -2459.6461597848
# S3ELkG : -1335.4823520329
# S1EL_xOffset : 0.0012336295
# S1EL_yOffset : 0.0038830861
# S2EL_xOffset : 0.000571577
# S2EL_yOffset : 0.0001713549
# S2ER_xOffset : 0.0008644794
# S2ER_yOffset : 0.000028122
# S1ER_xOffset : 0.0003610022
# S1ER_yOffset : 0.0005658865

# 2025-04-09-19-41-24 Bottom island CSR OFF, -25.5/-40.5
# L1PhaseSet : -25.5
# L2PhaseSet : -40.5
# S1ELkG : 199.6172012812
# S2ELkG : -2835.7932333598
# S3ELkG : -1509.5409225737
# S1EL_xOffset : 0.001104449
# S1EL_yOffset : -0.0004481716
# S2EL_xOffset : 0.0007930973
# S2EL_yOffset : -0.0001115433
# S2ER_xOffset : 0.0012539994
# S2ER_yOffset : 0.0005428733
# S1ER_xOffset : 0.0022305941
# S1ER_yOffset : 0.0032600893

# 2025-04-17-18-39-08-INCOMPLETE Top island CSR ON, -29.5/-41.0 +/- 1
# L1PhaseSet : -29.8556820972
# L2PhaseSet : -40.3623638841
# S1ELkG : 1159.52725513
# S2ELkG : -3801.0453652409
# S3ELkG : -1980.5829919112
# S1EL_xOffset : -0.0012253443
# S1EL_yOffset : -0.0013869576
# S2EL_xOffset : -0.0023376621
# S2EL_yOffset : 0.0005066835
# S2ER_xOffset : -0.0003404739
# S2ER_yOffset : -0.0010164428
# S1ER_xOffset : 0.0020155875
# S1ER_yOffset : -0.0021742004
#Incomplete optimization. 48 x 14 x 5 um

#2025-04-18-10-40-25 Top island CSR on
#Optimization from fixed phase and centered sextuples; changing sextupole strength only. Reasonably high confidence that this optimization run found global optimum; employed large population (50) full parameter space ("uniform") DE
# 5 um length seemed to be JUST outside the range of possibility; changing constraint to 6 um ONLY for this case
# L1PhaseSet : -29.5
# L2PhaseSet : -41
# S1ELkG : 8.0115286725
# S2ELkG : -1939.9824375316
# S3ELkG : -454.2447387444

#2025-04-18-12-44-00 Top island CSR
#Optimization with fixed phase. N-M of sextupole strengths and movers, starting from 2025-04-18-10-40-25
# L1PhaseSet : -29.5
# L2PhaseSet : -41
# S1ELkG : 45.94277598
# S2ELkG : -2896.7721959126
# S3ELkG : -386.3633298638
# S1EL_xOffset : -0.0000164107
# S1EL_yOffset : -0.0001164661
# S2EL_xOffset : -0.0007221524
# S2EL_yOffset : 0.0000494099
# S2ER_xOffset : 0.0002134529
# S2ER_yOffset : 0.0002790287
# S1ER_xOffset : 0.0000585785
# S1ER_yOffset : 0.0002014729

# 2025-04-19-07-26-16-INCOMPLETE Top island CSR ON, -29.5/-41.0 +/- 1
# L1PhaseSet : -29.8468028109
# L2PhaseSet : -40.4676460034
# S1ELkG : 209.0684650767
# S2ELkG : -2247.9176927407
# S3ELkG : -1401.8165327565
# S1EL_xOffset : -0.000639576
# S1EL_yOffset : -0.0034613661
# S2EL_xOffset : -0.0033192194
# S2EL_yOffset : -0.0024896306
# S2ER_xOffset : -0.0018343582
# S2ER_yOffset : -0.0012995615
# S1ER_xOffset : 0.000291516
# S1ER_yOffset : -0.0009120653
#Incomplete optimization. 54 x 16 x 5 um


# 2025-05-16-16-19-12 Top island CSR ON, -29.5/-41.0 +/- 1
# Polish of 2025-04-17-18-39-08
# L1PhaseSet : -29.8680631511
# L2PhaseSet : -40.3656177305
# S1ELkG : 1153.608769778
# S2ELkG : -3945.4688223922
# S3ELkG : -1977.759623838
# S1EL_xOffset : -0.0012480721
# S1EL_yOffset : -0.001013995
# S2EL_xOffset : -0.0023744644
# S2EL_yOffset : 0.0005304335
# S2ER_xOffset : -0.0003432634
# S2ER_yOffset : -0.0010105943
# S1ER_xOffset : 0.0020027113
# S1ER_yOffset : -0.0022130122
# 43 x 13 x 4.8 um at PENT




# 2025-05-18-09-02-04 Bottom island CSR ON, -28/-43.5 +/- 1
# Starting from 2025-04-09-18-04-59
# L1PhaseSet : -27.2485437132
# L2PhaseSet : -43.6771191246
# S1ELkG : 55.5089661748
# S2ELkG : -2881.6648679101
# S3ELkG : -1056.1683541543
# S1EL_xOffset : -0.0000508011
# S1EL_yOffset : 0.0003895852
# S2EL_xOffset : -0.0003942418
# S2EL_yOffset : -0.0000513773
# S2ER_xOffset : -0.0004504272
# S2ER_yOffset : -5.6873e-6
# S1ER_xOffset : 0.0014293515
# S1ER_yOffset : 0.000673204
# 33 x 13 x 4.7 um at PENT




